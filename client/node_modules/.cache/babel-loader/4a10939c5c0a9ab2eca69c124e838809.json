{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/angelageorge/Desktop/DailyDiaryHub/client/src/components/Hub.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useAuth0 } from '@auth0/auth0-react';\nimport LogoutButton from './LogoutButton.js';\nimport DiaryCards from './DiaryCards.js';\nimport NewEntry from './NewEntry';\nimport QuoteContainer from './QuoteContainer';\nimport SocialMedia from './SocialMedia.js';\nimport SearchBar from './SearchBar';\nimport axios from 'axios';\n\nfunction Hub() {\n  _s();\n\n  const {\n    user,\n    isAuthenticated\n  } = useAuth0();\n  const mainContent = {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"flex-start\"\n  };\n  const sidebar = {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  };\n  const displayEntries = {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"flex-start\"\n  };\n  const button = {\n    borderColor: \"transparent\",\n    backgroundColor: \"white\",\n    borderRadius: 20,\n    margin: 5,\n    paddingRight: 10,\n    paddingLeft: 10\n  };\n  const [displayArray, setArray] = React.useState([]);\n  const [searchArray, setSearch] = React.useState([]);\n  const [newTitle, setTitle] = React.useState(\"\");\n  const [newDate, setDate] = React.useState(\"\");\n  const [newText, setText] = React.useState(\"\");\n  const [newId, setId] = React.useState(\"\");\n\n  function submitHandler(myNewEntry) {\n    const dbEntry = {\n      username: user.sub,\n      //pass down username from auth0\n      title: myNewEntry.title,\n      text: myNewEntry.text,\n      date: myNewEntry.date\n    };\n\n    if (newId !== \"\") {\n      let id = newId;\n      axios.post('https://' + document.location.hostname + '/entries/update/' + id, dbEntry).then(response => {\n        console.log(response.data);\n        setId(\"\");\n        setTitle(\"\");\n        setDate(\"\");\n        setText(\"\");\n        loadProfile();\n      }).catch(error => {\n        console.log(\"could not update\");\n      });\n      return;\n    } //temp url!\n\n\n    axios.post('https://' + document.location.hostname + '/entries/add', dbEntry).then(response => {\n      console.log(response.data);\n      setArray([...displayArray, myNewEntry]);\n      setTitle(\"\");\n      setDate(\"\");\n      setText(\"\");\n      loadProfile();\n    }).catch(error => {\n      alert(\"You must enter a title, date, and text before you can submit a new entry.\");\n    });\n  }\n\n  function changeHandler(editObject) {\n    if (editObject.change === \"delete\") {\n      deleteEntry(editObject);\n    } else {\n      editEntry(editObject);\n    }\n  }\n\n  function deleteEntry(editObject) {\n    let id = editObject.id;\n    axios.delete('https://' + document.location.hostname + '/entries/' + id).then(res => {\n      console.log(res.data);\n      loadProfile();\n    });\n  }\n\n  function editEntry(editObject) {\n    setId(editObject.entry._id);\n    setTitle(editObject.entry.title);\n    setDate(editObject.entry.date.substring(0, 10));\n    setText(editObject.entry.text);\n  }\n\n  function updateValue(newValue) {\n    if (\"title\" in newValue) {\n      setTitle(newValue.title);\n    }\n\n    if (\"date\" in newValue) {\n      setDate(newValue.date);\n    }\n\n    if (\"text\" in newValue) {\n      setText(newValue.text);\n    }\n  }\n\n  function searchHandler(keyword) {\n    if (keyword !== \"\") {\n      setSearch(displayArray.filter((item, i) => {\n        if (displayArray[i].text.includes(keyword) || displayArray[i].title.includes(keyword)) {\n          return item;\n        } else return;\n      }));\n    } else {\n      setSearch([]);\n    }\n  }\n\n  const [main, setHeader] = React.useState();\n  const [accent, setSidebar] = React.useState();\n  const [profile, setProfile] = React.useState([]);\n  const [isLoaded, loaded] = React.useState(false);\n  const [toggle, toggleThis] = React.useState(false);\n  let headerColors = [\"pink\", \"CornflowerBlue\", \"DarkSeaGreen\"];\n  let sideColors = [\"palevioletred\", \"aliceBlue\", \"SeaGreen\"];\n\n  function loadProfile() {\n    axios.get('https://' + document.location.hostname + '/users').then(response => {\n      console.log(response.data);\n\n      if (response.data.length > 0) {\n        let curUser = response.data.filter(function (obj) {\n          return obj.username === user.sub;\n        });\n        setProfile(curUser[0]);\n        setHeader({\n          backgroundColor: headerColors[profile.theme]\n        });\n        setSidebar({\n          backgroundColor: sideColors[profile.theme]\n        });\n        loaded(true);\n      } else {\n        const dbUser = {\n          username: user.sub,\n          theme: 1\n        };\n        addUser(dbUser);\n      }\n    }); // get entires from db\n\n    axios.get('https://' + document.location.hostname + 'entries').then(response => {\n      console.log(response.data);\n\n      if (response.data.length > 0) {\n        let entries = response.data.filter(function (obj) {\n          if (obj.username === user.sub) {\n            let entry = {\n              id: obj._id,\n              username: obj.username,\n              title: obj.title,\n              text: obj.text,\n              date: obj.date\n            };\n            return entry;\n          } else return;\n        });\n        setArray([...entries]);\n      } else {\n        setArray([...[]]);\n      }\n    });\n  }\n\n  function addUser(dbUser) {\n    axios.post('https://' + document.location.hostname + '/users/add', dbUser).then(response => {\n      console.log(response.data);\n    });\n    setProfile(dbUser);\n    loaded(true);\n  }\n\n  function cycleTheme() {\n    var newIndex = profile.theme + 1;\n\n    if (newIndex > 2) {\n      newIndex = 0;\n    }\n\n    setProfile({\n      _id: profile._id,\n      username: profile.username,\n      theme: newIndex\n    });\n    setHeader({\n      backgroundColor: headerColors[newIndex]\n    });\n    setSidebar({\n      backgroundColor: sideColors[newIndex]\n    });\n    let updateDB = {\n      username: profile.username,\n      theme: newIndex\n    };\n    axios.post('https://' + document.location.hostname + '/users/update/' + profile._id, updateDB).then(res => console.log(res.data));\n  }\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      loadProfile();\n    }\n  }, [isAuthenticated, isLoaded]);\n  return isAuthenticated && /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      style: main,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Daily Diary Hub\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(QuoteContainer, {\n        id: user.sub\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navBttns\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: user.picture,\n          alt: user.name,\n          className: \"profilePic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(LogoutButton, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: button,\n          onClick: cycleTheme,\n          children: \"Change Theme\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: mainContent,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: (sidebar, accent),\n        className: \"side-bar\",\n        children: [/*#__PURE__*/_jsxDEV(NewEntry, {\n          title: newTitle,\n          date: newDate,\n          text: newText,\n          id: newId,\n          submitHandler: submitHandler,\n          updateValue: updateValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(SocialMedia, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: displayEntries,\n        children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n          searchHandler: searchHandler,\n          value: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(DiaryCards, {\n          entries: searchArray.length > 0 ? searchArray : displayArray,\n          changeHandler: changeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 242,\n    columnNumber: 13\n  }, this);\n}\n\n_s(Hub, \"zrsbMsU0LpQUu7A9Jn61KGajIcM=\", false, function () {\n  return [useAuth0];\n});\n\n_c = Hub;\nexport default Hub;\n\nvar _c;\n\n$RefreshReg$(_c, \"Hub\");","map":{"version":3,"sources":["/Users/angelageorge/Desktop/DailyDiaryHub/client/src/components/Hub.js"],"names":["React","useEffect","useAuth0","LogoutButton","DiaryCards","NewEntry","QuoteContainer","SocialMedia","SearchBar","axios","Hub","user","isAuthenticated","mainContent","display","flexDirection","alignItems","sidebar","displayEntries","button","borderColor","backgroundColor","borderRadius","margin","paddingRight","paddingLeft","displayArray","setArray","useState","searchArray","setSearch","newTitle","setTitle","newDate","setDate","newText","setText","newId","setId","submitHandler","myNewEntry","dbEntry","username","sub","title","text","date","id","post","document","location","hostname","then","response","console","log","data","loadProfile","catch","error","alert","changeHandler","editObject","change","deleteEntry","editEntry","delete","res","entry","_id","substring","updateValue","newValue","searchHandler","keyword","filter","item","i","includes","main","setHeader","accent","setSidebar","profile","setProfile","isLoaded","loaded","toggle","toggleThis","headerColors","sideColors","get","length","curUser","obj","theme","dbUser","addUser","entries","cycleTheme","newIndex","updateDB","picture","name"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useAuth0 } from '@auth0/auth0-react';\nimport LogoutButton from './LogoutButton.js';\nimport DiaryCards from './DiaryCards.js';\nimport NewEntry from './NewEntry';\nimport QuoteContainer from './QuoteContainer'\nimport SocialMedia from './SocialMedia.js';\nimport SearchBar from './SearchBar'\nimport axios from 'axios';\n\n\nfunction Hub() {\n    const { user, isAuthenticated } = useAuth0();\n    const mainContent = {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems : \"flex-start\"\n    }\n\n    const sidebar = {\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n    }\n\n    const displayEntries = {\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"flex-start\"\n    }\n\n      const button = {\n        borderColor : \"transparent\",\n        backgroundColor : \"white\",\n        borderRadius : 20,\n        margin : 5,\n        paddingRight: 10,\n        paddingLeft: 10\n    }\n\n    const [displayArray, setArray] = React.useState([]);\n    const [searchArray, setSearch] = React.useState([])\n    const [newTitle, setTitle] = React.useState(\"\");\n    const [newDate, setDate] = React.useState(\"\");\n    const [newText, setText] = React.useState(\"\");\n    const [newId, setId] = React.useState(\"\");\n\n    function submitHandler(myNewEntry) { \n        const dbEntry = {\n            username: user.sub, //pass down username from auth0\n            title: myNewEntry.title,\n            text: myNewEntry.text,\n            date:  myNewEntry.date\n        }\n\n        if (newId !== \"\")\n        {\n            let id = newId;\n            axios.post('https://' + document.location.hostname + '/entries/update/' + id, dbEntry)\n            .then((response) => {\n                console.log(response.data)\n                setId(\"\")\n                setTitle(\"\")\n                setDate(\"\")\n                setText(\"\")\n                loadProfile()\n            })\n            .catch((error) => {console.log(\"could not update\")})\n            return\n        }\n\n        //temp url!\n        axios.post('https://' + document.location.hostname + '/entries/add', dbEntry)\n            .then((response) => {\n                console.log(response.data)\n                setArray([...displayArray, myNewEntry])\n                setTitle(\"\")\n                setDate(\"\")\n                setText(\"\")\n                loadProfile()\n            })\n            .catch((error) => {\n                alert(\"You must enter a title, date, and text before you can submit a new entry.\")\n            })\n    }\n\n    function changeHandler(editObject){\n        if (editObject.change === \"delete\"){\n            deleteEntry(editObject)\n        }\n        else {\n            editEntry(editObject)\n        } \n    }\n\n    function deleteEntry(editObject) {\n        let id = editObject.id;\n        axios.delete('https://' + document.location.hostname + '/entries/' + id)\n            .then(res => {\n                console.log(res.data)\n                loadProfile()    \n            });\n    }   \n\n    function editEntry(editObject) {            \n        setId(editObject.entry._id)\n        setTitle(editObject.entry.title)\n        setDate(editObject.entry.date.substring(0,10))\n        setText(editObject.entry.text)\n    }\n\n    function updateValue(newValue){\n        if (\"title\" in newValue){\n            setTitle(newValue.title)\n        }\n        \n        if (\"date\" in newValue){\n            setDate(newValue.date)\n        }\n\n        if (\"text\" in newValue){\n            setText(newValue.text)\n        }\n        \n    }\n    \n    function searchHandler(keyword) {\n        if (keyword !== \"\"){\n            setSearch(displayArray.filter((item , i) => { \n                if (displayArray[i].text.includes(keyword) || displayArray[i].title.includes(keyword))\n                {\n                 return item \n                }\n                else return\n            }))\n        }\n        else {\n            setSearch([])\n        }\n    }\n\n    const [main, setHeader] = React.useState()\n    const [accent, setSidebar] = React.useState()\n    const [profile, setProfile] = React.useState([])\n    const [isLoaded, loaded] = React.useState(false)\n    const [toggle, toggleThis] = React.useState(false)\n\n    let headerColors = [\"pink\", \"CornflowerBlue\", \"DarkSeaGreen\"]\n    let sideColors = [\"palevioletred\", \"aliceBlue\", \"SeaGreen\"]\n\n    function loadProfile() {\n        axios.get('https://' + document.location.hostname + '/users')\n            .then(response=> {\n                console.log(response.data)\n                if (response.data.length > 0){\n                    let curUser = response.data.filter(function (obj){\n                        return obj.username === user.sub;\n                    });\n\n                    setProfile(curUser[0])\n                    setHeader({backgroundColor : headerColors[profile.theme]})\n                    setSidebar({backgroundColor : sideColors[profile.theme]})\n                    loaded(true)\n                }\n                else {\n                    const dbUser = {\n                        username: user.sub,\n                        theme: 1\n                    }\n                    addUser(dbUser)\n                }   \n            });\n        \n        // get entires from db\n        axios.get('https://' + document.location.hostname + 'entries')\n            .then(response=> {\n                console.log(response.data)\n                if (response.data.length > 0){\n                        let entries = response.data.filter( function(obj) {\n                            if (obj.username === user.sub){\n                                let entry = {\n                                    id : obj._id,\n                                    username : obj.username,\n                                    title : obj.title,\n                                    text: obj.text,\n                                    date: obj.date\n                                }\n                                return entry;\n                            }\n                            else return\n                    })\n                    setArray([...entries])    \n                }\n                else {\n                    setArray([...[]])\n                }\n            })\n\n    }  \n    \n    function addUser(dbUser) {\n        axios.post('https://' + document.location.hostname + '/users/add', dbUser)\n        .then((response) => {\n            console.log(response.data)\n        });\n\n        setProfile(dbUser)\n        loaded(true)\n    } \n\n    function cycleTheme(){\n        var newIndex = profile.theme+1;\n        if (newIndex > 2){\n            newIndex = 0\n        }\n\n        setProfile({\n            _id: profile._id,\n            username: profile.username,\n            theme: newIndex\n          });\n        setHeader({backgroundColor : headerColors[newIndex]})\n        setSidebar({backgroundColor : sideColors[newIndex]})\n        \n        let updateDB = {\n            username: profile.username,\n            theme: newIndex\n        }\n\n        axios.post('https://' + document.location.hostname + '/users/update/' + profile._id, updateDB)\n      .then(res => console.log(res.data));\n    }\n\n    useEffect(()=>{\n        if (isAuthenticated){\n        loadProfile()\n        }\n    }, [isAuthenticated, isLoaded]) \n    \n    return (\n        isAuthenticated && (\n            <div>\n                    \n                <div className = \"header\" style = {main}>\n                    <h1>Daily Diary Hub</h1>\n                    <QuoteContainer id = {user.sub}/>\n                    <div className = \"navBttns\">\n                        <img src = {user.picture} alt = {user.name} className = \"profilePic\"/>\n                        <LogoutButton />\n                        <button style = {button} onClick = {cycleTheme}>\n                            Change Theme\n                        </button>\n                    </div>\n                </div>\n                <div style = {mainContent}>\n                    \n                    <div style = {sidebar, accent} className = \"side-bar\">  \n                        <NewEntry title = {newTitle} date = {newDate} text = {newText} id = {newId} submitHandler = {submitHandler} updateValue = {updateValue}/>\n                        <SocialMedia />\n                    </div >\n                    <div style = {displayEntries}>\n                        <SearchBar searchHandler = {searchHandler} value = \"\"/>\n                        <DiaryCards entries = {searchArray.length > 0  ? searchArray : displayArray} changeHandler = {changeHandler} />\n                    </div>\n                    \n                </div>\n                \n            </div>\n        )\n    )\n}\n\nexport default Hub"]},"metadata":{},"sourceType":"module"}